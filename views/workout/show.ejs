<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head'); %>

<body>
    <div class="container-fluid">
        <%- include('../partials/nav'); %>
        <div class="container">
            <h2><%= workout.day %></h2>
            <div class="right favorite index my-5">
                <button id="addFavorite" class="btn btn-outline-warning">Add to Favorites</button>
                <form action="/workouts/<%= workout._id %>/favorite" method="POST" autocomplete="off" class="d-none">
                    <input type="hidden" name="id" value="<%= workout._id %>">
                    <div class="my-3 form-floating">
                        <input type="text" name="name" class="form-control" maxlength="30" required>
                        <label for="name">Name of Workout</label>
                    </div>
                    <input type="submit" value="Create Favorite" class="btn btn-outline-success">
                </form>
            </div>
            <div class="index">
                <% for (const exercise of workout.exercise) { %>
                    <div class="exercise m-4">
                        <h3><%= exercise.movement.name %></h3>
                        <% if (exercise.movement.isWeighted) { %>
                            <p>Weight: <%= exercise.weight %></p>
                            <p>Sets: <%= exercise.sets %></p>
                            <p>Repetitions per Set: <%= exercise.reps %></p>
                        <% } %>
                        <% if (exercise.movement.isCardio) { %>
                            <p>Duration: <%= exercise.minutes %> minutes</p>
                            <p>Calories Burned: <%= exercise.caloriesBurned %></p>
                        <% } %>
                        <div class="form-check form-switch">
                            <input type="checkbox" name="complete" role="switch" class="form-check-input complete" id="<%= workout._id %>"
                            <%= workout.isComplete ? 'disabled checked' : '' %>>
                            <label for="switch" class="form-check-label">Complete</label>
                        </div>
                    </div>
                <% } %>
            </div>
            <br>
            <br>
            <div class="progress" role="progressbar" aria-valuenow="0" aria-valuemax="100" aria-valuemin="0">
                <div class="progress-bar progress-bar-striped bg-success" <%= workout.isComplete ? 'style=width:100%': 'style=width:0%' %> ></div>
            </div>

            <% if (workout.isComplete) { %>
                <div class="center mt-4 fw-bold">Congratulations, workout completed!</div>
            <% } %>
            
            <br>
            <br>
            <div class="center">
                <a href="/workouts" class="btn btn-outline-secondary btn-lg mb-5">Back to Workouts</a>
            </div>
        </div>
    </div>
    <%- include('../partials/footer'); %>
</body>

</html>